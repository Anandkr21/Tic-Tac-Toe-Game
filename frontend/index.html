<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Sign In</title>
    <link rel="stylesheet" href="./cssfile/signup.css" />
  </head>
  <body>
    <div id="loginBox">
      <div>
        <button class="toogle-btn">Login</button>
        <button class="toogle-btn">Sign Up</button>
      </div>
      <div id="loginForm">
        <input
          type="email"
          id="login-email"
          placeholder="Enter your Email"
        /><br />
        <input
          type="email"
          id="login-password"
          placeholder="Enter your Password"
        /><br />
        <input type="submit" value="Login" id="login-btn" />
      </div>
      <div id="registerForm">
        <input type="text" id="register-name" placeholder="Enter your Name"><br>
        <input
          type="email"
          id="register-email"
          placeholder="Enter your Email"
        /><br />
        <input
          type="email"
          id="register-password"
          placeholder="Enter your Password"
        /><br />
        <input type="submit" value="Register" id="register-btn" />
      </div>
    </div>
  </body>
  <script>
    let loginBtn = document.getElementById("login-btn");
    let registerBtn = document.getElementById("register-btn");


    // login 
    loginBtn.addEventListener("click", () => {
      let loginEmail = document.getElementById("login-email").value;
      let loginPassword = document.getElementById("login-password").value;
      let obj = {
        email : loginEmail,
        password : loginPassword
      }

      fetch('http://localhost:8080/users/login',{
        method : "POST",
        headers : {
          "Content-type":"application/json"
        },
        body : JSON.stringify(obj)
      })
      .then((res)=>{
        return res.json()
      })
      .then((data)=>{
        if(data.msg == "Login Successful"){
          if(data.role=="Admin"){
            window.location.href = "./adminPanel.html"
          }else{
            window.location.href = "./home.html"
          }
        }else{
          alert(data.msg)
        }
      })
    });
    // login


    // register
    registerBtn.addEventListener("click",()=>{
      let registerName = document.getElementById('register-name').value;
      let registerEmail = document.getElementById('register-email').value;
      let registerPassword = document.getElementById('register-password').value;


      let obj = {
        name : registerName,
        email : registerEmail,
        password : registerPassword
      }

      fetch('http://localhost:8080/users/register',{
        method : "POST",
        headers : {
          "Content-type":"application/json"
        },
        body : JSON.stringify(obj)
      })
      .then((res)=>{
        return res.json()
      })
      .then((data)=>{
        alert(data.msg);
      })
    })
    // register
  </script>
</html>
